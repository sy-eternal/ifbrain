<!DOCTYPE html>
<html lang="zh-cn" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
	layout:decorator="layout">
<head>
<title>新增景点管理</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
<meta content="" name="description"/>
<meta content="" name="author"/>
	<link type="text/css" th:href="@{/css/font-awesome.min.css}" rel="stylesheet"/>
	 <link type="text/css" th:href="@{/css/bootstrap.min.css}" rel="stylesheet"/> 
	<link type="text/css" th:href="@{/css/jquery.fancybox.css}" rel="stylesheet"/>
	<link type="text/css" th:href="@{/css/owl.carousel.css}" rel="stylesheet"/> 
	<link type="text/css" th:href="@{/css/settings.css}" rel="stylesheet"/>
    <link type="text/css" th:href="@{/css/components.css}" rel="stylesheet"/>
	<link type="text/css" th:href="@{/css/style.css}" rel="stylesheet"/>
	<link type="text/css" th:href="@{/css/style-revolution-slider.css}" rel="stylesheet"/>
	<link type="text/css" th:href="@{/css/style-responsive.css}" rel="stylesheet"/>
	<link type="text/css" th:href="@{/css/red.css}" rel="stylesheet" id="style-color"/>
	<link type="text/css" th:href="@{/css/custom.css}" rel="stylesheet"/> 
	<link th:href="@{/css/layouts.css}" rel="stylesheet" type="text/css"/>
	<script type="text/javascript" th:src="@{/webjars/jquery/2.1.3/jquery.min.js}"></script>
	<link th:href="@{/assets/global/plugins/font-awesome/css/font-awesome.min.css}" rel="stylesheet" />
	<script th:src="@{/assets/global/plugins/jquery-migrate.min.js}" type="text/javascript"></script>
	<script th:src="@{/assets/global/plugins/jquery-ui/jquery-ui.min.js}" type="text/javascript"></script>
	<script th:src="@{/assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js}" type="text/javascript"></script>
	<script th:src="@{/assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js}" type="text/javascript"></script>
	<script th:src="@{/assets/global/plugins/jquery.blockui.min.js}" type="text/javascript"></script>
	<script th:src="@{/assets/global/plugins/jquery.cokie.min.js}" type="text/javascript"></script>
	<script th:src="@{/assets/global/plugins/uniform/jquery.uniform.min.js}" type="text/javascript"></script>
	<script th:src="@{/assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js}" type="text/javascript"></script>
	<!--  <script th:src="@{/assets/global/plugins/carousel-owl-carousel/owl-carousel/owl.carousel.min.js}"></script> -->
	<script th:src="@{/assets/global/scripts/metronic.js}"></script>
	<script th:src="@{/assets/admin/layout/scripts/quick-sidebar.js}"></script>
	<script th:src="@{/assets/admin/layout/scripts/demo.js}"></script>
<!-- Theme styles START -->
<!-- Theme styles END -->

<!-- BEGIN PAGE LEVEL STYLES -->
<link rel="stylesheet" type="text/css"
	th:href="@{/assets/global/plugins/bootstrap-select/bootstrap-select.min.css}" />
<link rel="stylesheet" type="text/css"
	th:href="@{/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css}" />
<link rel="stylesheet" type="text/css"
	th:href="@{/assets/global/plugins/select2/select2.css}" />
<link rel="stylesheet" type="text/css"
	th:href="@{/assets/global/plugins/jquery-multi-select/css/multi-select.css}" />
<link rel="stylesheet" type="text/css"
	th:href="@{/assets/global/plugins/bootstrap-daterangepicker/daterangepicker-bs3.css}" />
<link rel="stylesheet" type="text/css"
	th:href="@{/assets/global/plugins/image-picker/image-picker/image-picker.css}" />

<!-- 使用jQuery Validation控件进行前端验证 -->
	<script th:src="@{/webjars/jquery-validation/1.13.1/jquery.validate.min.js}"></script>
	<script th:src="@{/webjars/jquery-validation/1.13.1/additional-methods.min.js}"></script>
	<script	th:src="@{/assets/admin/pages/scripts/showList.js}"></script>
	<script th:src="@{/js/lib/jquery-validation/messages_zh.js}"></script>
	
	<script>

	</script>
	   <script type="text/javascript">
	  
	   
	function istrue(){
			var spotsname=$('#spotsname').val();
			var cityName=$('#cityName').val();
			var supplierid=$('#supplierid').val();
			var theme=$('#theme').val();
			$.ajax({
			    type: "Post",
			    url: "/spots/valueistrue",
			    data: { 
			    		"spotsname":spotsname,
				    	"cityName":cityName,
				    	"supplierid":supplierid,
				    	"theme":theme
			    },
			    success: function (data) {
			        if(data==true){
					 	$('#spValue').html(''); 
						document.getElementById('alltrue').disabled=false;
					}else{
						$('#spValue').css('color','red');
						$('#spValue').html('该景点名称已存在')
						document.getElementById('alltrue').disabled=true;
					}        
			    }
			});
			} 
	</script>   
</head>
<body>
<div layout:fragment="content">
		<div class="row">
			<div class="col-md-9 col-sm-9 col-sm-offset-2">
				<h1>新增景点管理</h1>
					<div class="content-form-page">
					<div class="row">
						<div class="col-md-7 col-sm-7">
							<form   id="mainForm" class="form-horizontal" role="form" method="post" th:action="@{/spots/create}" th:object="${spots}" enctype="multipart/form-data">
					 <div class="form-group" th:classappend="${#fields.hasErrors('cityid')}? 'has-error'">
							<label for="cityid" class="col-xs-3 control-label">城市名称</label>
							<div class="col-xs-6">
								<select class="form-control" th:field="*{cityid}" name="cityid" onchange="istrue()">
									<option th:each="cityid : ${cityid}" th:value="${cityid.id}" th:text="${cityid.cityName}"  id="cityName"></option>
								</select>
								<span class="text-danger" th:if="${#fields.hasErrors('cityid')}" th:errors="*{cityid}"></span>
							 </div>
					 </div>
					 <!-- 供应商名称 -->
					 <div class="form-group" th:classappend="${#fields.hasErrors('supplierid')}? 'has-error'">
							<label for="supplierid" class="col-xs-3 control-label">供应商名称</label>
							<div class="col-xs-6">
								<select class="form-control" th:field="*{supplierid}" name="supplierid" onchange="istrue()">
									<option th:each="supplierid : ${supplierid}" th:value="${supplierid.id}" th:text="${supplierid.cnName}"  id="supplierid" ></option>
								</select>
								<span class="text-danger" th:if="${#fields.hasErrors('supplierid')}" th:errors="*{supplierid}"></span>
							 </div>
					 </div>
																<div class="form-group"  th:classappend="${#fields.hasErrors('spotsname')}? 'has-error'">
																<label for="spotsname" class="col-xs-3 control-label">主题名称</label>
																	<div class="col-md-8">
																		<input type="text" id="select2_9" name="tripAim"
																			class="form-control select2" value=""   required="required"/>
																			<span class="text-danger" th:if="${#fields.hasErrors('spotsname')}" th:errors="*{spotsname}"></span>
																	</div>
																</div>
																<div class="owl-carousel owl-carousel6-brands">
																	<div class="recent-work-item"
																		th:each=" theme:${theme}"
																		th:value="${theme.id}">
																		<input type="hidden" id="startB" name="startB"
																			th:value="${theme.theme}" />
																	</div>

																</div>
								<div class="form-group" >
									<label for="spotsname" class="col-xs-3 control-label"> 景点名称</label>
									<div class="col-lg-8">
										<input type="text" class="form-control" th:field="*{spotsname}"  required="required" id="spotsname" onblur="istrue()"/>
										<!-- <span class="text-danger" th:if="${#fields.hasErrors('spotsname')}" th:errors="*{spotsname}"></span> --><span id="spValue"></span>
									</div>
									
								</div>
								
								
								<div class="form-group" th:classappend="${#fields.hasErrors('spotsename')}? 'has-error'">
									<label for="spotsename" class="col-xs-3 control-label"> 景点英文名称 </label>
									<div class="col-lg-8">
										<input type="text" class="form-control" th:field="*{spotsename}" required="required" />
										<span class="text-danger" th:if="${#fields.hasErrors('spotsename')}" th:errors="*{spotsename}"></span>
									</div>
								</div>
								
								
								<div class="form-group" th:classappend="${#fields.hasErrors('location')}? 'has-error'">
									<label for="location" class="col-xs-3 control-label"> 地点 </label>
									<div class="col-lg-8">
										<input type="text" class="form-control" th:field="*{location}" required="required"/>
										<span class="text-danger" th:if="${#fields.hasErrors('location')}" th:errors="*{location}"></span>
									</div>
								</div>
								
								<div class="form-group" th:classappend="${#fields.hasErrors('enlocation')}? 'has-error'">
									<label for="enlocation" class="col-xs-3 control-label"> 地点英文名 </label>
									<div class="col-lg-8">
										<input type="text" class="form-control" th:field="*{enlocation}" required="required"/>
										<span class="text-danger" th:if="${#fields.hasErrors('enlocation')}" th:errors="*{enlocation}"></span>
									</div>
								</div>
								
								
								<div class="form-group" th:classappend="${#fields.hasErrors('address')}? 'has-error'">
									<label for="address" class="col-xs-3 control-label"> 地址 </label>
									<div class="col-lg-8">
										<input type="text" class="form-control" th:field="*{address}" required="required"/>
										<span class="text-danger" th:if="${#fields.hasErrors('address')}" th:errors="*{address}"></span>
									</div>
								</div>
								
								
								<div class="form-group"> 
						                             <label  class="control-label col-md-3">图片</label>
						                                <div class="col-md-4">
                                                             <input type="file" name="file" required="required" value="浏览"/>
				                                           <p class="text-danger" th:text="${errorMessage}"></p>
                                                    </div>
						           </div>
						           
						           
								<div class="form-group" th:classappend="${#fields.hasErrors('spotsdescription')}? 'has-error'">
									<label for="spotsdescription" class="col-xs-3 control-label"> 景点介绍 </label>
									<div class="col-lg-8">
									<textarea rows="5" cols="59"  th:field="*{spotsdescription}"></textarea>
									<!-- 	<input type="text" class="form-control"  th:field="*{spotsdescription}"/> -->
										<span class="text-danger" th:if="${#fields.hasErrors('spotsdescription')}" th:errors="*{spotsdescription}"></span>
									</div>
								</div>
								
								
									<div class="form-group" th:classappend="${#fields.hasErrors('spotssummary')}? 'has-error'">
									<label for="spotssummary" class="col-xs-3 control-label"> 景点概要 </label>
									<div class="col-lg-8">
									<textarea rows="5" cols="59" th:field="*{spotssummary}" ></textarea>
										<!-- <input type="text" class="form-control" th:field="*{spotssummary}"/> -->
										<span class="text-danger" th:if="${#fields.hasErrors('spotssummary')}" th:errors="*{spotssummary}"></span>
									</div>
								</div>
								
								
								<div class="form-group" th:classappend="${#fields.hasErrors('specialnotes')}? 'has-error'">
									<label for="specialnotes" class="col-xs-3 control-label"> 特别提醒 </label>
									<div class="col-lg-8">
									<textarea rows="5" cols="59" th:field="*{specialnotes}" ></textarea>
										<!-- <input type="text" class="form-control" th:field="*{specialnotes}" /> -->
										<span class="text-danger" th:if="${#fields.hasErrors('specialnotes')}" th:errors="*{specialnotes}"></span>
									</div>
								</div>
								
								
								
								<div class="form-group" th:classappend="${#fields.hasErrors('clothingtips')}? 'has-error'">
									<label for="clothingtips" class="col-xs-3 control-label"> 穿衣建议 </label>
									<div class="col-lg-8">
									<textarea rows="5" cols="59" th:field="*{clothingtips}"></textarea>
										<!-- <input type="text" class="form-control" th:field="*{clothingtips}" /> -->
										<span class="text-danger" th:if="${#fields.hasErrors('clothingtips')}" th:errors="*{clothingtips}"></span>
									</div>
								</div>
								
								
								
								<div class="form-group" th:classappend="${#fields.hasErrors('spendingtips')}? 'has-error'">
									<label for="spendingtips" class="col-xs-3 control-label"> 消费提醒 </label>
									<div class="col-lg-8">
									<textarea rows="5" cols="59" th:field="*{spendingtips}"></textarea>
										<!-- <input type="text" class="form-control" th:field="*{spendingtips}" /> -->
										<span class="text-danger" th:if="${#fields.hasErrors('spendingtips')}" th:errors="*{spendingtips}"></span>
									</div>
								</div>
								
								
								
								<div class="form-group" th:classappend="${#fields.hasErrors('weathertips')}? 'has-error'">
									<label for="weathertips" class="col-xs-3 control-label"> 季节推荐 </label>
									<div class="col-lg-8">
									<textarea rows="5" cols="59"  th:field="*{weathertips}" ></textarea>
									<!-- 	<input type="text" class="form-control" th:field="*{weathertips}" /> -->
										<span class="text-danger" th:if="${#fields.hasErrors('weathertips')}" th:errors="*{weathertips}"></span>
									</div>
								</div>
								
								
						 <!--销售公式  -->		
								<!-- <div class="form-group" th:classappend="${#fields.hasErrors('salesformula')}? 'has-error'">
									<label for="salesformula" class="col-lg-4 control-label"> 销售公式 </label>
									<div class="col-lg-8">
										<input type="text" class="form-control" th:field="*{salesformula}" />
										<span class="text-danger" th:if="${#fields.hasErrors('salesformula')}" th:errors="*{salesformula}"></span>
									</div>
								</div> -->
								
								
						<!-- 盈利返还导游 	 -->	
								<!-- <div class="form-group" th:classappend="${#fields.hasErrors('comguide')}? 'has-error'">
									<label for="comguide" class="col-lg-4 control-label"> 盈利返还导游 </label>
									<div class="col-lg-8">
										<input type="text" class="form-control" th:field="*{comguide}" />
										<span class="text-danger" th:if="${#fields.hasErrors('comguide')}" th:errors="*{comguide}"></span>
									</div>
								</div>  -->
								<div class="row">
									<div class="col-lg-8 col-md-offset-4 padding-left-0 padding-top-20">
										<button type="submit" class="btn btn-primary" id="alltrue" onclick="doSubmit()">保存</button>
										<a type="button" th:href="@{/spots}" class="btn btn-default">关闭</a>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

<div layout:fragment="script">
			<!-- BEGIN PAGE LEVEL PLUGINS -->
			<script type="text/javascript"
				th:src="@{/assets/global/plugins/jquery-validation/js/jquery.validate.min.js}"></script>
			<script type="text/javascript"
				th:src="@{/assets/global/plugins/jquery-validation/js/additional-methods.min.js}"></script>
			<!-- END PAGE LEVEL PLUGINS -->

			<!-- BEGIN PAGE LEVEL SCRIPTS -->
			<script th:src="@{/assets/global/scripts/metronic.js}"
				type="text/javascript"></script>
			<script th:src="@{/assets/admin/layout/scripts/layout.js}"
				type="text/javascript"></script>
			<script th:src="@{/assets/admin/pages/scripts/form-wizard.js}"></script>
			<!-- END PAGE LEVEL SCRIPTS -->

			<!-- BEGIN PAGE LEVEL PLUGINS -->
			<script type="text/javascript"
				th:src="@{/assets/global/plugins/bootstrap-daterangepicker/moment.min.js}"></script>
			<script type="text/javascript"
				th:src="@{/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.js}"></script>
			<script th:src="@{/assets/admin/pages/scripts/components-pickers.js}"></script>
			<script
				th:src="@{/assets/admin/pages/scripts/components-form-tools.js}"></script>
			<!-- END PAGE LEVEL PLUGINS -->

			<!-- BEGIN PAGE LEVEL PLUGINS -->
			<script type="text/javascript"
				th:src="@{/assets/global/plugins/fuelux/js/spinner.min.js}"></script>
			<script
				th:src="@{/assets/global/plugins/typeahead/handlebars.min.js}"
				type="text/javascript"></script>
			<script
				th:src="@{/assets/global/plugins/typeahead/typeahead.bundle.min.js}"
				type="text/javascript"></script>
			<!-- END PAGE LEVEL PLUGINS -->

			<!-- BEGIN PAGE LEVEL PLUGINS -->
			<script type="text/javascript"
				th:src="@{/assets/global/plugins/bootstrap-select/bootstrap-select.min.js}"></script>
			<script type="text/javascript"
				th:src="@{/assets/global/plugins/select2/select2.min.js}"></script>
			<script type="text/javascript"
				th:src="@{/assets/global/plugins/jquery-multi-select/js/jquery.multi-select.js}"></script>
			<!-- END PAGE LEVEL PLUGINS -->

			<script
				th:src="@{/assets/global/plugins/image-picker/image-picker/image-picker.js}"
				type="text/javascript"></script>
			<script
				th:src="@{/assets/global/plugins/carousel-owl-carousel/owl-carousel/owl.carousel.min.js}"
				type="text/javascript"></script>
			<script
				th:src="@{/assets/admin/pages/scripts/components-dropdowns.js}"></script>

			<script th:src="@{/assets/frontend/layout/scripts/layout.js}"
				type="text/javascript"></script>

			<!-- BEGIN CUSTOM SCRIPT -->
			<script th:src="@{/assets/global/scripts/custom.js}"
				type="text/javascript"></script>
		</div>
			<!-- END CUSTOM SCRIPT -->
<!-- END PAGE LEVEL SCRIPTS -->
<script>
jQuery(document).ready(function() {       
   // initiate layout and plugins
               /*  Metronic.init(); // init metronic core components
				Layout.init(); // init current layout
				QuickSidebar.init(); // init quick sidebar
				Demo.init(); // init demo features
				ComponentsDropdowns.init();
				FormWizard.init(); */
	Metronic.init(); // init metronic core components
	Layout.init(); // init current layout
	Layout.initOWL();
	FormWizard.init();
	ComponentsPickers.init();
	//showList.init();
//ComponentsFormTools.init();
	CustomFormActions.init();
	$("select").imagepicker();
				
});
</script>
</body>
</html>